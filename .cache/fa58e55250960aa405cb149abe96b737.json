{"id":"PO9O","dependencies":[{"name":"/Users/nick/projects/tomespark/node_modules/jszip/package.json","includedInParent":true,"mtime":1510180218000},{"name":"/Users/nick/projects/tomespark/package.json","includedInParent":true,"mtime":1534115700413},{"name":"/Users/nick/projects/tomespark/.babelrc","includedInParent":true,"mtime":1533367520439},{"name":"./external","loc":{"line":3,"column":23},"parent":"/Users/nick/projects/tomespark/node_modules/jszip/lib/compressedObject.js","resolved":"/Users/nick/projects/tomespark/node_modules/jszip/lib/external.js"},{"name":"./stream/DataWorker","loc":{"line":4,"column":25},"parent":"/Users/nick/projects/tomespark/node_modules/jszip/lib/compressedObject.js","resolved":"/Users/nick/projects/tomespark/node_modules/jszip/lib/stream/DataWorker.js"},{"name":"./stream/DataLengthProbe","loc":{"line":7,"column":30},"parent":"/Users/nick/projects/tomespark/node_modules/jszip/lib/compressedObject.js","resolved":"/Users/nick/projects/tomespark/node_modules/jszip/lib/stream/DataLengthProbe.js"},{"name":"./stream/Crc32Probe","loc":{"line":6,"column":25},"parent":"/Users/nick/projects/tomespark/node_modules/jszip/lib/compressedObject.js","resolved":"/Users/nick/projects/tomespark/node_modules/jszip/lib/stream/Crc32Probe.js"}],"generated":{"js":"\"use strict\";var e=require(\"./external\"),r=require(\"./stream/DataWorker\"),s=require(\"./stream/DataLengthProbe\"),t=require(\"./stream/Crc32Probe\");s=require(\"./stream/DataLengthProbe\");function o(e,r,s,t,o){this.compressedSize=e,this.uncompressedSize=r,this.crc32=s,this.compression=t,this.compressedContent=o}o.prototype={getContentWorker:function(){var t=new r(e.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s(\"data_length\")),o=this;return t.on(\"end\",function(){if(this.streamInfo.data_length!==o.uncompressedSize)throw new Error(\"Bug : uncompressed data size mismatch\")}),t},getCompressedWorker:function(){return new r(e.Promise.resolve(this.compressedContent)).withStreamInfo(\"compressedSize\",this.compressedSize).withStreamInfo(\"uncompressedSize\",this.uncompressedSize).withStreamInfo(\"crc32\",this.crc32).withStreamInfo(\"compression\",this.compression)}},o.createWorkerFrom=function(e,r,o){return e.pipe(new t).pipe(new s(\"uncompressedSize\")).pipe(r.compressWorker(o)).pipe(new s(\"compressedSize\")).withStreamInfo(\"compression\",r)},module.exports=o;","map":{"mappings":[{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":3,"column":0},"generated":{"line":1,"column":17}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":3,"column":0},"generated":{"line":1,"column":19}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":3,"column":0},"generated":{"line":1,"column":27}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":4,"column":0},"generated":{"line":1,"column":41}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":4,"column":0},"generated":{"line":1,"column":43}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":4,"column":0},"generated":{"line":1,"column":51}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":5,"column":0},"generated":{"line":1,"column":74}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":5,"column":0},"generated":{"line":1,"column":76}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":5,"column":0},"generated":{"line":1,"column":84}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":6,"column":0},"generated":{"line":1,"column":112}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":6,"column":0},"generated":{"line":1,"column":114}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":6,"column":0},"generated":{"line":1,"column":122}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":7,"column":0},"generated":{"line":1,"column":145}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":7,"column":0},"generated":{"line":1,"column":147}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":7,"column":0},"generated":{"line":1,"column":155}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":18,"column":0},"generated":{"line":1,"column":183}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":18,"column":0},"generated":{"line":1,"column":192}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":18,"column":0},"generated":{"line":1,"column":194}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":18,"column":0},"generated":{"line":1,"column":196}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":18,"column":0},"generated":{"line":1,"column":198}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":18,"column":0},"generated":{"line":1,"column":200}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":18,"column":0},"generated":{"line":1,"column":202}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":19,"column":0},"generated":{"line":1,"column":205}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":19,"column":0},"generated":{"line":1,"column":210}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":19,"column":0},"generated":{"line":1,"column":225}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":20,"column":0},"generated":{"line":1,"column":227}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":20,"column":0},"generated":{"line":1,"column":232}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":20,"column":0},"generated":{"line":1,"column":249}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":21,"column":0},"generated":{"line":1,"column":251}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":21,"column":0},"generated":{"line":1,"column":256}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":21,"column":0},"generated":{"line":1,"column":262}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":22,"column":0},"generated":{"line":1,"column":264}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":22,"column":0},"generated":{"line":1,"column":269}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":22,"column":0},"generated":{"line":1,"column":281}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":23,"column":0},"generated":{"line":1,"column":283}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":23,"column":0},"generated":{"line":1,"column":288}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":23,"column":0},"generated":{"line":1,"column":306}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":26,"column":0},"generated":{"line":1,"column":308}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":26,"column":0},"generated":{"line":1,"column":310}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":26,"column":0},"generated":{"line":1,"column":320}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":31,"column":0},"generated":{"line":1,"column":321}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":31,"column":0},"generated":{"line":1,"column":338}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":32,"column":0},"generated":{"line":1,"column":349}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":32,"column":0},"generated":{"line":1,"column":353}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":32,"column":0},"generated":{"line":1,"column":355}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":32,"column":0},"generated":{"line":1,"column":359}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":32,"column":0},"generated":{"line":1,"column":361}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":32,"column":0},"generated":{"line":1,"column":363}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":32,"column":0},"generated":{"line":1,"column":371}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":32,"column":0},"generated":{"line":1,"column":379}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":32,"column":0},"generated":{"line":1,"column":384}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":33,"column":0},"generated":{"line":1,"column":404}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":33,"column":0},"generated":{"line":1,"column":409}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":33,"column":0},"generated":{"line":1,"column":414}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":33,"column":0},"generated":{"line":1,"column":426}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":34,"column":0},"generated":{"line":1,"column":446}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":34,"column":0},"generated":{"line":1,"column":451}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":34,"column":0},"generated":{"line":1,"column":455}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":34,"column":0},"generated":{"line":1,"column":457}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":36,"column":0},"generated":{"line":1,"column":473}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":36,"column":0},"generated":{"line":1,"column":475}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":42,"column":0},"generated":{"line":1,"column":480}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":37,"column":0},"generated":{"line":1,"column":487}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":37,"column":0},"generated":{"line":1,"column":489}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":37,"column":0},"generated":{"line":1,"column":492}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":37,"column":0},"generated":{"line":1,"column":498}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":38,"column":0},"generated":{"line":1,"column":509}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":38,"column":0},"generated":{"line":1,"column":512}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":38,"column":0},"generated":{"line":1,"column":517}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":38,"column":0},"generated":{"line":1,"column":528}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":38,"column":0},"generated":{"line":1,"column":542}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":38,"column":0},"generated":{"line":1,"column":544}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":39,"column":0},"generated":{"line":1,"column":561}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":39,"column":0},"generated":{"line":1,"column":567}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":39,"column":0},"generated":{"line":1,"column":571}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":39,"column":0},"generated":{"line":1,"column":577}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":42,"column":0},"generated":{"line":1,"column":620}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":48,"column":0},"generated":{"line":1,"column":623}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":48,"column":0},"generated":{"line":1,"column":643}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":49,"column":0},"generated":{"line":1,"column":654}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":49,"column":0},"generated":{"line":1,"column":661}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":49,"column":0},"generated":{"line":1,"column":665}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":49,"column":0},"generated":{"line":1,"column":667}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":49,"column":0},"generated":{"line":1,"column":669}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":49,"column":0},"generated":{"line":1,"column":677}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":49,"column":0},"generated":{"line":1,"column":685}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":49,"column":0},"generated":{"line":1,"column":690}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":50,"column":0},"generated":{"line":1,"column":710}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":50,"column":0},"generated":{"line":1,"column":725}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":50,"column":0},"generated":{"line":1,"column":742}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":50,"column":0},"generated":{"line":1,"column":747}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":51,"column":0},"generated":{"line":1,"column":763}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":51,"column":0},"generated":{"line":1,"column":778}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":51,"column":0},"generated":{"line":1,"column":797}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":51,"column":0},"generated":{"line":1,"column":802}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":52,"column":0},"generated":{"line":1,"column":820}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":52,"column":0},"generated":{"line":1,"column":835}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":52,"column":0},"generated":{"line":1,"column":843}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":52,"column":0},"generated":{"line":1,"column":848}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":53,"column":0},"generated":{"line":1,"column":855}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":53,"column":0},"generated":{"line":1,"column":870}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":53,"column":0},"generated":{"line":1,"column":884}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":53,"column":0},"generated":{"line":1,"column":889}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":66,"column":0},"generated":{"line":1,"column":904}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":66,"column":0},"generated":{"line":1,"column":906}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":66,"column":0},"generated":{"line":1,"column":923}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":66,"column":0},"generated":{"line":1,"column":932}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":66,"column":0},"generated":{"line":1,"column":934}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":66,"column":0},"generated":{"line":1,"column":936}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":67,"column":0},"generated":{"line":1,"column":939}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":67,"column":0},"generated":{"line":1,"column":946}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":68,"column":0},"generated":{"line":1,"column":948}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":68,"column":0},"generated":{"line":1,"column":953}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":68,"column":0},"generated":{"line":1,"column":957}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":69,"column":0},"generated":{"line":1,"column":960}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":69,"column":0},"generated":{"line":1,"column":965}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":69,"column":0},"generated":{"line":1,"column":969}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":69,"column":0},"generated":{"line":1,"column":971}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":70,"column":0},"generated":{"line":1,"column":992}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":70,"column":0},"generated":{"line":1,"column":997}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":70,"column":0},"generated":{"line":1,"column":999}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":70,"column":0},"generated":{"line":1,"column":1014}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1018}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1023}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1027}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1029}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1048}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1063}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1077}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1081}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1088}},{"source":"../node_modules/jszip/lib/compressedObject.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1096}}],"sources":{"../node_modules/jszip/lib/compressedObject.js":"'use strict';\n\nvar external = require(\"./external\");\nvar DataWorker = require('./stream/DataWorker');\nvar DataLengthProbe = require('./stream/DataLengthProbe');\nvar Crc32Probe = require('./stream/Crc32Probe');\nvar DataLengthProbe = require('./stream/DataLengthProbe');\n\n/**\n * Represent a compressed object, with everything needed to decompress it.\n * @constructor\n * @param {number} compressedSize the size of the data compressed.\n * @param {number} uncompressedSize the size of the data after decompression.\n * @param {number} crc32 the crc32 of the decompressed file.\n * @param {object} compression the type of compression, see lib/compressions.js.\n * @param {String|ArrayBuffer|Uint8Array|Buffer} data the compressed data.\n */\nfunction CompressedObject(compressedSize, uncompressedSize, crc32, compression, data) {\n    this.compressedSize = compressedSize;\n    this.uncompressedSize = uncompressedSize;\n    this.crc32 = crc32;\n    this.compression = compression;\n    this.compressedContent = data;\n}\n\nCompressedObject.prototype = {\n    /**\n     * Create a worker to get the uncompressed content.\n     * @return {GenericWorker} the worker.\n     */\n    getContentWorker : function () {\n        var worker = new DataWorker(external.Promise.resolve(this.compressedContent))\n        .pipe(this.compression.uncompressWorker())\n        .pipe(new DataLengthProbe(\"data_length\"));\n\n        var that = this;\n        worker.on(\"end\", function () {\n            if(this.streamInfo['data_length'] !== that.uncompressedSize) {\n                throw new Error(\"Bug : uncompressed data size mismatch\");\n            }\n        });\n        return worker;\n    },\n    /**\n     * Create a worker to get the compressed content.\n     * @return {GenericWorker} the worker.\n     */\n    getCompressedWorker : function () {\n        return new DataWorker(external.Promise.resolve(this.compressedContent))\n        .withStreamInfo(\"compressedSize\", this.compressedSize)\n        .withStreamInfo(\"uncompressedSize\", this.uncompressedSize)\n        .withStreamInfo(\"crc32\", this.crc32)\n        .withStreamInfo(\"compression\", this.compression)\n        ;\n    }\n};\n\n/**\n * Chain the given worker with other workers to compress the content with the\n * given compresion.\n * @param {GenericWorker} uncompressedWorker the worker to pipe.\n * @param {Object} compression the compression object.\n * @param {Object} compressionOptions the options to use when compressing.\n * @return {GenericWorker} the new worker compressing the content.\n */\nCompressedObject.createWorkerFrom = function (uncompressedWorker, compression, compressionOptions) {\n    return uncompressedWorker\n    .pipe(new Crc32Probe())\n    .pipe(new DataLengthProbe(\"uncompressedSize\"))\n    .pipe(compression.compressWorker(compressionOptions))\n    .pipe(new DataLengthProbe(\"compressedSize\"))\n    .withStreamInfo(\"compression\", compression);\n};\n\nmodule.exports = CompressedObject;\n"},"lineCount":null}},"hash":"1bd0f7ff8bd69f4945080a7f80ee017a","cacheData":{"env":{}}}